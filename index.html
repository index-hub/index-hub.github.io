<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="expires" content="0">
    <title>OneIndex</title>
</head>
<body>
<script>
    function get(variable) {
        let query = window.location.search.substring(1);
        let vars = query.split("&");
        for (var i = 0; i < vars.length; i++) {
            let pair = vars[i].split("=");
            if (pair[0] === variable) {
                return pair[1];
            }
        }
        return false;
    }

    let url = get('state');
    let code = get('code');
    let error = get('error');
    if (url && url.indexOf('http') !== -1) {
        window.location = decodeURIComponent(url) + "?code=" + code + "&error=" + error;
    } else {
        document.write(code);
    }
</script>
</body>
</html>
